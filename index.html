<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>GMMTV Pre-Order for Fansign</title>
  <meta name="viewport" content="width=1200">
  <link href="https://fonts.googleapis.com/css?family=Sarabun:400,700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Sarabun', sans-serif; background: #f7f9fa; margin: 0; color: #222;}
    .container { max-width: 1100px; margin: 32px auto; padding: 28px; background: #fff; border-radius: 18px; box-shadow: 0 4px 18px #e4e4e4;}
    h1 { font-size: 2.5rem; margin-bottom: 8px; text-align: center;}
    .red-note { color: #e12d2d; background: #ffecec; font-size: 1.1rem; border-radius: 18px; padding: 14px 8px; margin-bottom: 18px; font-weight: bold; text-align:center;}
    .star-note { color: #e12d2d; font-size: 2rem; font-weight: bold; text-align: center;}
    .products { display: grid; grid-template-columns: repeat(4,1fr); gap: 28px;}
    .product-card { background: #f5f8fb; border-radius: 14px; padding: 18px 12px; text-align: center; box-shadow: 0 2px 8px #e8e8e8;}
    .product-card img { width: 180px; height: 270px; object-fit: cover; border-radius: 12px; border: 1.5px solid #f2e4f6;}
    .prod-title { font-weight: bold; margin-top: 9px; font-size: 1.09rem;}
    .prod-price { color: #e7672f; font-weight: bold; font-size: 1.18rem;}
    select, input[type='number'] { padding: 7px 10px; border-radius: 7px; border: 1.5px solid #e4e4e4; font-size: 1rem; margin-top:8px;}
    .btn-add { background: #18b951; color: #fff; border: none; padding: 7px 14px; border-radius: 8px; margin: 12px 0 0 0; cursor: pointer; font-weight: bold;}
    .btn-add:disabled { background: #bbb; }
    .btn-remove { background: #e13232; color: #fff; border: none; padding: 3px 11px; border-radius: 6px; margin-left: 10px; font-size: .9rem; cursor: pointer;}
    .cart-section { background: #f7fff6; border-radius: 16px; margin-top: 38px; padding: 22px; box-shadow: 0 2px 8px #e4e4e4;}
    .cart-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px;}
    .cart-list { margin: 0 0 8px 0; }
    .cart-item { font-size: 1.09rem; margin: 8px 0; display: flex; align-items: center;}
    .cart-item select, .cart-item input { margin: 0 8px;}
    .cart-sum { color: #e12d2d; font-size: 1.18rem; font-weight: bold; text-align:right;}
    .btn-copy { background: #ffd797; color: #8d5a00; border: none; padding: 6px 14px; border-radius: 7px; font-weight: bold; margin-left: 10px; cursor: pointer;}
    .pay-section { margin-top: 36px; background: #eaffea; border-radius: 16px; padding: 14px 10px; text-align: center;}
    .pay-number { color: #178046; font-size: 1.13rem; font-weight: bold;}
    .pay-name { color: #178046;}
    .pay-total { color: #067911; font-size: 1.1rem; font-weight: bold;}
    .form-section { margin-top: 18px; background: #e3eafd; border-radius: 15px; padding: 14px;}
    .form-link-btn { background: #e12d2d; color: #fff; font-weight: bold; border: none; border-radius: 9px; font-size: 1.1rem; padding: 10px 22px; margin: 16px 0 20px 0; cursor: pointer;}
    textarea {width:95%;margin-top:10px;height:80px;background:#fff7ee;border-radius:9px;padding:8px;font-size:1rem;}
    @media (max-width: 1100px){
      .products { grid-template-columns: repeat(2,1fr);}
    }
    @media (max-width: 700px){
      .container{padding: 6px;}
      .products{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
<div class="container">
  <div class="star-note">* ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏•‡∏î 30% *</div>
  <div class="red-note">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏ã‡∏ô‡πå</div>
  <h1>Pre-Order for Fansign</h1>

  <!-- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
  <div class="products" id="products"></div>

  <!-- ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ -->
  <div class="cart-section" id="cartSection" style="display:none;">
    <div class="cart-title">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</div>
    <div class="cart-list" id="cartList"></div>
    <div class="cart-sum" id="cartSum"></div>
    <button class="btn-copy" onclick="copyOrderSummary()">Copy ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  </div>

  <!-- ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå -->
  <div class="pay-section" id="paySection" style="display:none;">
    <div class="pay-number">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå: <b id="ppNum">0917567358</b> <button class="btn-copy" onclick="copyText('0917567358')">Copy</button></div>
    <div class="pay-name">Kanyarat Nuchanart</div>
    <div class="pay-total" id="payTotal"></div>
  </div>

  <!-- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° -->
  <div class="form-section" id="formSection" style="display:none;">
    <div>
      üëâ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß <a href="https://forms.gle/rs8wSC7psGdwheE39" class="form-link-btn" target="_blank">‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</a>
    </div>
    <textarea id="orderSummaryBox"></textarea>
    <div style="margin-top:10px;">
      <button class="btn-copy" onclick="copyOrderSummary()">Copy ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    </div>
  </div>
</div>

<script>
const mascotsGMMTV = [
  "KINGMAN", "BABII", "POLCASAN", "MR. SATURNWORLD", "PAODY",
  "TOMAFOX", "JAIDEE", "AVOCEAN", "SAMRUAY", "JUMMO", "GUINZLY",
  "ANGELO", "WESLEY", "MUVMUV", "META", "CERI", "PERMPOON",
  "LUNAR", "ANY", "NILKHNAKE", "SHYLE", "NONGNOOONG", "LYKOU"
];

const coupleNames = [
  "OFFGUN", "TAYNEW", "BRIGHTWIN", "EARTHMIX", "PONDPHUWIN", "OHMNANON",
  "FORCEBOOK", "JOONGDUNK", "JIMMYSEA", "FIRSTKHAOTUNG", "GEMINIFOURTH",
  "WINNYSATANG", "GREATINN", "SEAKEEN", "PERTHSANTA", "WILLIAMEST", "JUNIORMARK",
  "JOSSGAWIN", "MARKOHM", "AOUBOOM", "SURFJAVA", "LUKEMICK", "CHOKUNASTON",
  "MILKLOVE", "EMIBONNIE", "NAMTANFILM", "VIEWMIM", "JUNEMEWNICH",
  "JAMIEEARN", "KENPAUL", "PODPAPANG", "ALMONDPROGRESS"
];

const boxOptions = ["BOX A", "BOX B"];

// ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ï‡πá‡∏° ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏•‡∏î 30%
function sale(p) { return Math.round(p * 0.7); }

const PRODUCTS = [
  // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏≤‡∏™‡∏Ñ‡∏≠‡∏ï
  {id: "sticker_set", title: "Sticker Set", price: sale(220), image: "images/sticker_set.jpg", select: mascotsGMMTV},
  {id: "hair_band", title: "Hair Band", price: sale(490), image: "images/hair_band.jpg", select: mascotsGMMTV},
  {id: "huggy_bag", title: "Huggy Bag", price: sale(590), image: "images/huggy_bag.jpg", select: mascotsGMMTV},
  {id: "sticky_fabric", title: "Sticky Fabric", price: sale(390), image: "images/sticky_fabric.jpg", select: mascotsGMMTV},
  {id: "clear_pouch", title: "Clear Pouch", price: sale(350), image: "images/clear_pouch.jpg", select: mascotsGMMTV},
  {id: "charm_illusion_tote", title: "Fandom Character Charm Illusion Tote Bag", price: sale(890), image: "images/charm_illusion_tote.jpg", select: mascotsGMMTV},
  {id: "patchy_illusion_tote", title: "Fandom Character Patchy Illusion Tote Bag", price: sale(890), image: "images/patchy_illusion_tote.jpg", select: mascotsGMMTV},
  // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å BOX
  {id: "phone_grippy", title: "Fandom Phone Grippy (Random)", price: sale(290), image: "images/phone_grippy.jpg", select: boxOptions},
  // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏π‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (BL/GL/Side)
  {id: "acrylic_keychain", title: "Customizable Acrylic Keychain", price: sale(350), image: "images/acrylic_keychain.jpg", select: coupleNames},
  {id: "collectible_card_album", title: "Collectible Card Album", price: sale(300), image: "images/card_album.jpg", select: coupleNames},
  // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô
  {id: "that_summer", title: "That Summer (‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢)", price: sale(450), image: "images/that_summer.jpg"},
  {id: "burnout", title: "Burnout Syndrome (‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢)", price: sale(450), image: "images/burnout.jpg"},
  {id: "last_twilight", title: "Last Twilight (‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢)", price: sale(450), image: "images/last_twilight.jpg"},
  {id: "thamepo", title: "Thamepo (Heart That Skips a Beat Novel)", price: sale(490), image: "images/thamepo.jpg"},
  {id: "ceri_doll_keychain", title: "Ceri Doll Keychain", price: sale(790), image: "images/ceri_doll_keychain.jpg"},
  {id: "nilkhnake_doll_keychain", title: "Nilkhnake Doll Keychain", price: sale(790), image: "images/nilkhnake_doll_keychain.jpg"},
];

let cart = [];
function renderProducts(){
  const container = document.getElementById('products');
  container.innerHTML = '';
  PRODUCTS.forEach(prod => {
    let prodSelect = '';
    if(prod.select){
      prodSelect = `
        <select id="select_${prod.id}" style="margin-top:10px;width:95%;">
          <option value="">${prod.select===boxOptions ? '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å BOX A ‡∏´‡∏£‡∏∑‡∏≠ BOX B' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠'}</option>
          ${prod.select.map(a=>`<option value="${a}">${a}</option>`).join("")}
        </select>
      `;
    }
    container.innerHTML += `
      <div class="product-card">
        <img src="${prod.image}" alt="${prod.title}">
        <div class="prod-title">${prod.title}</div>
        <div class="prod-price">${prod.price}‡∏ø</div>
        ${prodSelect || ""}
        <button class="btn-add" onclick="addToCart('${prod.id}')">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
      </div>
    `;
  });
}
window.onload = renderProducts;

function addToCart(pid){
  const prod = PRODUCTS.find(x=>x.id===pid);
  let selectVal = "";
  if(prod.select){
    selectVal = document.getElementById(`select_${pid}`).value;
    if(!selectVal){ alert(prod.select===boxOptions ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å BOX" : "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"); return;}
  }
  const same = cart.find(x=>x.id===pid && x.option===selectVal);
  if(same){
    same.qty += 1;
  }else{
    cart.push({id:pid, name:prod.title, price:prod.price, option:selectVal, qty:1});
  }
  renderCart();
}

function renderCart(){
  const cartList = document.getElementById("cartList");
  const cartSection = document.getElementById("cartSection");
  const paySection = document.getElementById("paySection");
  const formSection = document.getElementById("formSection");
  cartSection.style.display = cart.length ? "" : "none";
  paySection.style.display = cart.length ? "" : "none";
  formSection.style.display = cart.length ? "" : "none";
  if(!cart.length) return;
  cartList.innerHTML = '';
  let sum = 0;
  cart.forEach((item,i)=>{
    sum += item.price * item.qty;
    cartList.innerHTML += `
      <div class="cart-item">
        ${item.name}${item.option?` <span style="color:#178046;">(${item.option})</span>`:""} 
        &nbsp; x <input type="number" min="1" max="99" value="${item.qty}" style="width:40px" onchange="updateQty(${i},this.value)">
        <span style="color:#e13232;font-weight:bold;">= ${item.price*item.qty}‡∏ø</span>
        <button class="btn-remove" onclick="removeCart(${i})">‡∏•‡∏ö</button>
      </div>
    `;
  });
  document.getElementById("cartSum").innerHTML = `‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${sum} ‡∏ö‡∏≤‡∏ó`;
  document.getElementById("payTotal").innerHTML = `‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô: ${sum} ‡∏ö‡∏≤‡∏ó`;
  document.getElementById("orderSummaryBox").value = cart.map(item=>{
    return `${item.name}${item.option?` (${item.option})`:""} x ${item.qty} = ${item.price*item.qty} ‡∏ö‡∏≤‡∏ó`;
  }).join('\n') + `\n‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${sum} ‡∏ö‡∏≤‡∏ó`;
}

function updateQty(idx, val){
  let v = parseInt(val);
  if(isNaN(v)||v<1) v=1;
  cart[idx].qty = v;
  renderCart();
}
function removeCart(idx){
  cart.splice(idx,1);
  renderCart();
}
function copyOrderSummary(){
  const t = document.getElementById("orderSummaryBox");
  t.select(); t.setSelectionRange(0,9999);
  document.execCommand('copy');
}
function copyText(text){
  navigator.clipboard.writeText(text);
}
</script>
</body>
</html>
