<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Pre-Order for Fansign</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background: #f4f5f8;
      color: #222;
      margin: 0;
    }
    .star-note {
      color: #e53935;
      font-size: 1.45rem;
      font-weight: bold;
      text-align: center;
      margin-top: 1.3rem;
      margin-bottom: 0.3rem;
      letter-spacing: 1.5px;
    }
    .discount-note {
      color: #cc1a00;
      font-size: 1.1rem;
      font-weight: 600;
      margin: 2.5rem 0 0.1rem 0;
      text-align: center;
      letter-spacing: 1.5px;
    }
    header {
      background: #fff;
      border-bottom: 1.5px solid #e2e2e2;
      padding: 1.7rem 1rem 1.2rem 1rem;
      text-align: center;
      box-shadow: 0 2px 8px 0 rgba(70,70,70,0.04);
    }
    header h1 {
      font-size: 2.6rem;
      margin: 0;
      letter-spacing: 1.5px;
      color: #214c3f;
      font-weight: 700;
    }
    .container {
      max-width: 1200px;
      margin: 2.3rem auto 2rem auto;
      background: #fff;
      border-radius: 1.5rem;
      box-shadow: 0 8px 30px 0 #0001;
      padding: 2.7rem 2.3rem 1.7rem;
    }
    h2 { text-align: left; margin-top:0;font-size:1.32rem;letter-spacing:.8px;}
    .product-list {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2.1rem 2rem;
      margin: 1.3rem 0 2rem;
    }
    .product-card {
      background: #f7f9fa;
      border-radius: 1.1rem;
      box-shadow: 0 1px 6px #0001;
      padding: 1.2rem 1rem 1.2rem;
      text-align: center;
      display: flex; flex-direction: column; align-items: center;
      min-height: 350px;
      transition:.2s;
      position:relative;
    }
    .product-card img {
      width: 200px;
      height: 300px;
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
      border-radius: 1.1rem;
      margin-bottom: 1.2rem;
      background: #fff;
      box-shadow: 0 0 7px #2221;
      border: 1.5px solid #e5e5e5;
      transition: .2s;
    }
    .product-card h3 {
      font-size: 1.09rem;
      margin: 0 0 .13rem;
      font-weight: 600;
      color: #184032;
    }
    .product-card .price {
      color: #ea7d00;
      font-weight: bold;
      font-size: 1.11rem;
      margin-bottom: .8rem;
    }
    .product-card input[type=number] {
      width: 60px;
      font-size: 1rem;
      border-radius: 7px;
      border: 1px solid #bbb;
      padding: 3px 10px;
      margin-top:.1rem;
    }
    .cart-box {
      background: #f3f6f5;
      border-radius: 1.3rem;
      margin: 2.1rem 0 1.6rem;
      padding: 1.6rem 1.6rem .7rem;
      box-shadow: 0 0 12px 0 #0001;
    }
    .cart-summary {
      font-size: 1.09rem;
      color: #2a2a2a;
      margin-bottom: .9rem;
      line-height:2;
      word-break:break-word;
    }
    .order-summary-block {
      background: #fdf6e3;
      border: 1.5px solid #ffe0c0;
      border-radius: 1.2rem;
      padding: 1.5rem 2rem;
      margin: 2.1rem 0 1.2rem 0;
      font-size: 1.13rem;
      max-width: 650px;
      margin-left:auto;
      margin-right:auto;
    }
    .order-summary-block h3 {
      margin-top: 0;
      color: #b95800;
      font-size: 1.2rem;
      text-align:center;
    }
    .order-summary-block ul {
      padding-left: 1.5em;
      margin: 1em 0 .8em 0;
    }
    .order-summary-block li {
      margin-bottom: .28em;
      color: #393720;
    }
    .order-summary-total {
      font-weight: 700;
      color: #e53935;
      font-size: 1.18rem;
      margin-top:.5em;
      text-align:right;
    }
    .btn-main {
      background: linear-gradient(90deg, #2fc7b2, #256d4c);
      color: #fff;
      font-size: 1.13rem;
      font-weight: 600;
      border: none;
      border-radius: 1.2rem;
      padding: .85rem 2.6rem;
      margin: 1.2rem auto .3rem;
      display: block;
      cursor: pointer;
      box-shadow: 0 2px 8px #28ad7366;
      transition: .15s;
    }
    .btn-main:active { filter: brightness(.95);}
    #paymentSection {
      padding: 2rem 0 .5rem 0;
    }
    /* --- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏° --- */
    .form-link-block .red-btn {
      background:#e53935!important;
      color:#fff!important;
      padding:.5rem 1.2rem;
      font-weight:700;
      border-radius:1.2rem;
      text-decoration:none;
      box-shadow:0 2px 8px #f5bcbc77;
      display:inline-block;
      margin-left:4px;
      transition:.15s;
    }
    .form-link-block .red-btn:hover {
      background:#b91818!important;
    }
    #qrcode {display:none;}
    .pay-detail {
      text-align: center;
      color: #176842;
      font-weight: bold;
      margin: .7rem 0 1.4rem;
      font-size: 1.19rem;
      background: #eaf7f1;
      border-radius: 0.8rem;
      padding: 1rem 0 .7rem 0;
      border:1px solid #c8ecd6;
    }
    .pay-copy-block {
      text-align: center;
      margin: .8rem auto 1.1rem;
    }
    .copy-btn {
      background: #fff4ee;
      border: 1px solid #d1b7a6;
      border-radius: 1rem;
      color: #be6200;
      font-size: .99rem;
      margin-left: 8px;
      padding: .43rem 1.2rem;
      cursor:pointer;
      transition:.15s;
      font-weight:500;
    }
    .copy-btn:active {background:#ffe6d3;}
    .form-link-block {
      margin: 1.3rem auto 2.5rem auto;
      text-align: center;
      background: #f4f5ff;
      border-radius: 1.1rem;
      padding: 1.4rem 1rem 1.7rem;
      max-width: 600px;
      box-shadow: 0 0 12px #d8e5fa33;
    }
    .form-link-block a {
      font-size: 1.13rem;
      font-weight: 700;
      text-decoration: none;
      margin-top:.7rem;
    }
    .order-textarea {
      width:95%;max-width:550px;min-height:70px;padding:8px 14px;
      border-radius:8px;background:#fff3f1;border:1.3px solid #deb7a6;
      font-size:1.07rem;margin-bottom:.5rem;margin-top:.6rem;
      font-family: 'Sarabun',sans-serif;
    }
    .warn-nocoupon {
      background: #fff0ef;
      border-left: 7px solid #e53935;
      color: #c0241c;
      font-size: 1.26rem;
      border-radius: 1.1rem;
      padding: 1.1rem 1.2rem .8rem;
      margin-bottom: 1.6rem;
      text-align: center;
      font-weight: 700;
      letter-spacing: .7px;
      margin-top: 0.9rem;
    }
    .success {
      background: #d3fae6;
      border-radius: 1.1rem;
      color: #126138;
      padding: 1.3rem;
      margin:1.5rem 0 1.7rem;
      text-align: center;
      font-size:1.12rem;
      font-weight:500;
    }
    @media (max-width: 1100px) {
      .container {max-width:98vw;padding:1rem;}
      .product-card img {width:150px;height:230px;}
    }
    @media (max-width: 700px) {
      body {overflow-x:auto;}
      .container {min-width:1100px;}
      .product-list {min-width:900px;}
      .product-card img {width:120px;height:180px;}
    }
  </style>
</head>
<body>
  <div class="discount-note">* ‡∏•‡∏î 30% ‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô</div>
  <header>
    <h1>Pre-Order for Fansign</h1>
  </header>
  <div class="star-note warn-nocoupon">
    ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏ã‡∏ô‡πå
  </div>
  <div class="container">
    <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
    <form id="orderForm" onsubmit="return false;">
      <div class="product-list" id="productList"></div>
    </form>
    <div class="cart-box" id="cartBox" style="display:none;">
      <div class="cart-summary" id="cartSummary"></div>
      <div id="orderSummaryBlock"></div>
      <button class="btn-main" onclick="showPay()">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
    </div>
    <div id="paymentSection" style="display:none;">
      <div class="order-summary-block" id="orderSummaryPay"></div>
      <!-- QR ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å -->
      <div class="pay-detail" style="background:#e5f9ee;">
        ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå: <span id="promptpay" style="font-size:1.19rem;color:#0c5396;font-weight:700;">0917567358</span>
        <button class="copy-btn" onclick="copyPromptpay()">Copy</button>
        <br>Kanyarat Nuchanart <br>
        ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô: <span id="totalPay">0</span> ‡∏ö‡∏≤‡∏ó
        <span id="copyPPok" style="color:#198b37;font-weight:500;font-size:.98rem;display:none;margin-left:7px;">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!</span>
      </div>
      <div class="warn-nocoupon" style="margin-top:.5rem;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÑ‡∏ã‡∏ô‡πå</div>
      <div class="form-link-block" style="background:#eef1fd;">
        <div style="font-weight:600;margin-bottom:8px;">
          üëâ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß 
          <a href="https://forms.gle/rs8wSC7psGdwheE39" 
             class="red-btn"
             target="_blank">
             ‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
          </a>
        </div>
        <div style="font-size:1.13rem;color:#226; font-weight:700; margin:.6rem 0 .5rem">‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</div>
        <div style="margin:1rem 0 .6rem;">(Copy ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)</div>
        <textarea id="orderCopy" class="order-textarea" readonly></textarea><br>
        <button class="copy-btn" onclick="copyOrderText()">Copy ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <span id="copyOk" style="color:#198b37;font-weight:500;font-size:.98rem;display:none;margin-left:7px;">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!</span>
      </div>
    </div>
  </div>
  <script>
    // ----- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡∏°‡∏µ Fandom Phone Grippy Random, ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ 200x300) -----
    const products = [
      {name: "That Summer Novel", price: 315, image: "that_summer.jpg"},
      {name: "Burnout Syndrome Novel", price: 315, image: "burnout.jpg"},
      {name: "Last Twilight (ENG)", price: 315, image: "last_twilight.jpg"},
      {name: "Thamepo Novel (ENG)", price: 345, image: "thamepo.jpg"},
      {name: "CERI Doll Keychain", price: 555, image: "ceri_doll_keychain.jpg"},
      {name: "NILKHNAKE Doll Keychain", price: 555, image: "nilkhnake_doll_keychain.jpg"},
      {name: "Collectible Card Set (AlmondProgress/Viewmim/Junemewnich)", price: 245, image: "collectible_card_set.jpg"},
      {name: "Customizable Acrylic Keychain", price: 245, image: "acrylic_keychai.jpg"},
      {name: "Fandom Phone Grippy (Random)", price: 245, image: "phone_grippy.jpg"},
      {name: "Magsafe Wallet Stand", price: 343, image: "magsafe_wallet.jpg"},
      {name: "Sticker Set", price: 154, image: "sticker_set.jpg"},
      {name: "Hair Band", price: 343, image: "hair_band.jpg"},
      {name: "Huggy Bag", price: 413, image: "huggy_bag.jpg"},
      {name: "Card Album", price: 210, image: "card_album.jpg"},
      {name: "Sticky Fabric", price: 273, image: "sticky_fabric.jpg"},
      {name: "Clear Pouch", price: 245, image: "clear_pouch.jpg"},
      {name: "Charm Illusion Tote Bag", price: 623, image: "charm_illusion_tote.jpg"},
      {name: "Patchy Illusion Tote Bag", price: 623, image: "patchy_illusion_tote.jpg"}
    ];
    let cart = Array(products.length).fill(0);

    function renderProducts() {
      let html = "";
      products.forEach((p, i) => {
        html += `
          <div class="product-card">
            <img src="images/${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/200x300?text=No+Image';">
            <h3>${p.name}</h3>
            <div class="price">${p.price} ‡∏ø</div>
            <input type="number" min="0" value="0" onchange="updateCart(${i}, this.value)">
          </div>
        `;
      });
      document.getElementById('productList').innerHTML = html;
    }
    renderProducts();

    function updateCart(idx, val) {
      cart[idx] = parseInt(val) || 0;
      calcTotal();
    }

    function renderOrderSummary() {
      let html = `<h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3><ul>`;
      let total = 0;
      let found = false;
      cart.forEach((q,i) => {
        if (q > 0) {
          found = true;
          html += `<li>${products[i].name} x ${q} = ${products[i].price*q} ‡∏ö‡∏≤‡∏ó</li>`;
          total += products[i].price*q;
        }
      });
      html += `</ul>`;
      html += `<div class="order-summary-total">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${total} ‡∏ö‡∏≤‡∏ó</div>`;
      return found ? html : '';
    }

    function calcTotal() {
      let total = 0, detail = '';
      cart.forEach((q,i)=>{
        if(q>0) detail += `${products[i].name} x ${q} (${products[i].price*q}‡∏ø)<br>`;
        total += q*products[i].price;
      });
      document.getElementById('cartSummary').innerHTML = detail
        ? detail + `<br><b>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${total} ‡∏ö‡∏≤‡∏ó</b>` : "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤";
      document.getElementById('totalPay').innerText = total;
      // summary block
      document.getElementById('orderSummaryBlock').innerHTML = renderOrderSummary();
      document.getElementById('cartBox').style.display = total > 0 ? '' : 'none';
    }

    function showPay() {
      if(cart.reduce((a,b)=>a+b,0)==0){
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô');
        return;
      }
      // ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      let html = renderOrderSummary();
      document.getElementById('orderSummaryPay').innerHTML = html;

      // textarea order (for copy)
      let orderText = '';
      cart.forEach((q,i)=>{
        if(q>0) orderText += `${products[i].name} x ${q} = ${products[i].price*q} ‡∏ö‡∏≤‡∏ó\n`;
      });
      let total = 0;
      cart.forEach((q,i)=>{total += q*products[i].price;});
      orderText += `‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${total} ‡∏ö‡∏≤‡∏ó\n`;
      document.getElementById('orderCopy').value = orderText;

      document.getElementById('paymentSection').style.display = '';
      window.scrollTo({top: document.body.scrollHeight, behavior: "smooth"});
    }

    function copyOrderText() {
      const ta = document.getElementById('orderCopy');
      ta.select();
      document.execCommand('copy');
      document.getElementById('copyOk').style.display = '';
      setTimeout(()=>{document.getElementById('copyOk').style.display='none';}, 1200);
    }

    function copyPromptpay() {
      const pp = document.getElementById('promptpay').innerText;
      navigator.clipboard.writeText(pp);
      document.getElementById('copyPPok').style.display = '';
      setTimeout(()=>{document.getElementById('copyPPok').style.display='none';}, 1200);
    }

    calcTotal();
  </script>
</body>
</html>
